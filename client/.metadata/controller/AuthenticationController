{
    "id": "ExtBox1-ext-gen2998",
    "type": "controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "stores": null,
        "designer|init": "",
        "designer|userClassName": "AuthenticationController"
    },
    "customConfigs": [],
    "designerId": "59d209db-27d4-4bf0-a6d7-34590ece6417",
    "$viewOrder": 0,
    "expanded": true,
    "cn": [
        {
            "id": "ExtBox1-ext-gen9958",
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onLoginButtonTap",
                "implHandler": "        var loginFormData = this.getLoginView().getValues();\n        this.doLogin(loginFormData.login, loginFormData.password);",
                "name": "tap",
                "designer|targetType": "Ext.Button",
                "designer|controlQuery": "#LoginButton",
                "designer|userClassName": "onLoginButtonTap"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen25180",
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mainAppView",
                "selector": "mainappview",
                "xtype": null,
                "designer|userClassName": "mainAppView"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen6848",
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onLoadingViewActivate",
                "implHandler": "console.log('loading view activated');\n\nvar configStore = Ext.getStore(\"ConfigStore\");\nconfigStore.load({\n    callback: function(records, operation, success) {\n        if (success) {\n            this.doAutoLogin();\n        } else {\n            this.navigateToLoginView();            \n        }\n    },\n    scope: this\n});",
                "name": "activate",
                "designer|targetType": "Ext.Container",
                "designer|controlQuery": "#loadingitem",
                "designer|userClassName": "onLoadingViewActivate"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen18609",
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "loginView",
                "selector": "authenticationview",
                "xtype": "loginview",
                "designer|userClassName": "loginView"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen24808",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "updateLocalSettings",
                "designer|params": [
                    "userModel"
                ],
                "implHandler": "var localSettingsStore = Ext.getStore(\"LocalSettingsStore\");\nlocalSettingsStore.removeAt(0);\nvar m = Ext.create('fishpickle.model.User');\nm.setData(userModel);\nlocalSettingsStore.add(m);\nlocalSettingsStore.sync();",
                "designer|userClassName": "updateLocalSettings"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen12174",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doLogin",
                "designer|params": [
                    "loginName",
                    "password"
                ],
                "implHandler": "//get the user by login name\nif (fishpickle.baseURL && loginName && password) {\n    var userStore = Ext.getStore('UserStore');\n    if (!userStore) {\n        userStore = Ext.create('fishpickle.store.UserStore');\n    }\n    userStore.getProxy().setUrl(fishpickle.baseURL + 'rest/login/' + loginName);\n    userStore.load({\n        callback: function(records, operation, success) {\n            if (success) {\n                var serverUser = records[0].data;\n                if (serverUser && password == serverUser.password) {\n                    this.updateLocalSettings(serverUser);\n                    this.navigateToMyGroupsView();\n                } else {\n                    this.navigateToLoginView();\n                    Ext.Msg.alert('Error', 'The password is invalid.  Please try again.');\n                }\n            } else {\n                this.navigateToLoginView();\n                Ext.Msg.alert('Error','The user name or password is invalid.  Please try again.');\n            }\n        },\n        scope: this\n    });\n\n} else {\n    //force user to login\n    this.navigateToLoginView();\n}\n\n",
                "designer|userClassName": "doLogin"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen11454",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "navigateToLoginView",
                "implHandler": "this.getMainAppView().setActiveItem(1);",
                "designer|userClassName": "navigateToLoginView"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen11761",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "navigateToMyGroupsView",
                "implHandler": "this.getMainAppView().setActiveItem(2);",
                "designer|userClassName": "navigateToMyGroupsView"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen22703",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "doAutoLogin",
                "implHandler": "var localSettingsStore = Ext.getStore(\"LocalSettingsStore\");\nlocalSettingsStore.load({\n    callback: function(records, operation, success) {\n        if (success) {\n            var settings = localSettingsStore.getAt(0);\n            if (settings && settings.data && settings.data.login && settings.data.login.length > 0 && settings.data.password) {\n                this.doLogin(settings.data.login, settings.data.password);\n            } else {\n                this.navigateToLoginView();\n            }\n        } else {\n            this.navigateToLoginView();\n        }\n\n    },\n    scope: this\n});",
                "designer|userClassName": "doAutoLogin"
            },
            "customConfigs": [],
            "expanded": true
        }
    ]
}